import pandas as pd

def correct_participant():
    p_partic = [0, 175670, 175670, 175670, 175640, 175640, 175640, 175728, 175728, 175728, 175728, 175728, 175727,
                175728, 175710, 176060, 176060, 176060, 176120, 176120, 176120, 175710, 175710, 175710, 176198,
                176198, 176198, 176228, 176228, 176228, 176264, 176264, 176264, 176272, 176272, 176272, 176265,
                176265, 176265, 176265, 176315, 176315, 176315, 176316, 176316, 176316, 176323, 176323, 176323,
                176334, 176334, 176334, 176366, 176426, 176426, 176426, 176468, 176468, 176468, 176501, 176501,
                176501, 176544, 176544, 176544, 176607, 176610, 176610, 176610, 176607, 176607, 176611, 176611,
                176611, 176645, 176645, 176645, 176716, 176716, 176716, 176779, 176779, 176779, 176780,
                176780, 176780, 176868, 176868, 176868, 176949, 176949, 176949, 177223, 177223, 177223, 177250,
                177250, 177250, 176989, 176989, 176989, 177294, 177294, 177294, 177312, 177312, 177312, 177372,
                177372, 177372, 177374, 177374, 177374, 177378, 177450, 177450, 177450, 177459, 177459, 177459,
                177468, 177468, 177468, 177485, 177485, 177485, 177486, 177489, 177486, 177486, 177489, 177489,
                177494, 177503, 177503, 177503, 177525, 177525, 177525, 177551, 177551, 177551, 177556,
                177556, 177556, 177558, 177558, 177558, 177559, 177559, 177559, 177576, 177576, 177576, 177583,
                177583, 177583, 177632, 177639, 177639, 177639, 177680, 177680, 177680, 177765, 177876, 177877,
                177876, 177876, 177877, 177877, 0]

    # if participant same number exactly 3x after each other = valid
    correct = []
    for i in range(len(p_partic)):
        point_1 = p_partic[i + 1]
        point_2 = p_partic[i + 2]
        point_3 = p_partic[i + 3]

        tail_l = p_partic[i]
        tail_r = p_partic[i + 4]

        # end of list
        if tail_r == 0:
            break
        if (point_1 == point_2 == point_3) and (point_1 not in (tail_r, tail_l)):
            correct.append(point_1)
    return correct

cor_par = correct_participant()
something = set([0, 175670, 175670, 175670, 175640, 175640, 175640, 175728, 175728, 175728, 175728, 175728, 175727,
                175728, 175710, 176060, 176060, 176060, 176120, 176120, 176120, 175710, 175710, 175710, 176198,
                176198, 176198, 176228, 176228, 176228, 176264, 176264, 176264, 176272, 176272, 176272, 176265,
                176265, 176265, 176265, 176315, 176315, 176315, 176316, 176316, 176316, 176323, 176323, 176323,
                176334, 176334, 176334, 176366, 176426, 176426, 176426, 176468, 176468, 176468, 176501, 176501,
                176501, 176544, 176544, 176544, 176607, 176610, 176610, 176610, 176607, 176607, 176611, 176611,
                176611, 176645, 176645, 176645, 176716, 176716, 176716, 176779, 176779, 176779, 176780,
                176780, 176780, 176868, 176868, 176868, 176949, 176949, 176949, 177223, 177223, 177223, 177250,
                177250, 177250, 176989, 176989, 176989, 177294, 177294, 177294, 177312, 177312, 177312, 177372,
                177372, 177372, 177374, 177374, 177374, 177378, 177450, 177450, 177450, 177459, 177459, 177459,
                177468, 177468, 177468, 177485, 177485, 177485, 177486, 177489, 177486, 177486, 177489, 177489,
                177494, 177503, 177503, 177503, 177525, 177525, 177525, 177551, 177551, 177551, 177556,
                177556, 177556, 177558, 177558, 177558, 177559, 177559, 177559, 177576, 177576, 177576, 177583,
                177583, 177583, 177632, 177639, 177639, 177639, 177680, 177680, 177680, 177765, 177876, 177877,
                177876, 177876, 177877, 177877, 0])
print(set(something))
print(len(something))
raise KeyboardInterrupt
from os.path import dirname, join
script_dir = dirname(__file__)
pop_path = join(script_dir, 'BT_data_2.csv')
with open(pop_path) as file:
    data = pd.read_csv(file, sep=';', index_col="Index", usecols = ['Index','Subject','Created', 'gender','age','education','correct'])

# remove participants that did not furful the criteria above from the dataset
new = data[data['Subject'].isin(cor_par)].dropna(how = 'any', thresh=3) # only valid participants

new.to_csv('Transformed_BT.csv')


# after this step i removed some rows by hand on excel
    # removed rows where if people started the experiment multiple times but did not get further then the demographics
        # -> removed the additional gender, education and age entries
